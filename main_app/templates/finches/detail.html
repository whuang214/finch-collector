{% extends 'base.html' %} {% block content %}

<div class="container mt-4">
  <div class="row">
    <div class="col-md-6">
      <img
        src="{{ finch.image_url }}"
        alt="{{ finch.name }}"
        class="img-fluid"
      />
    </div>
    <div class="col-md-6">
      <h1>{{ finch.name }}</h1>
      <p class="mb-4">{{ finch.description }}</p>

      <a href="{% url 'finches' %}" class="btn btn-primary"
        >Back to Finch List</a
      >
      <a href="{% url 'finches_update' finch.id %}" class="btn btn-link"
        >Edit</a
      >
      <a href="{% url 'finches_delete' finch.id %}" class="btn btn-link"
        >Delete</a
      >
    </div>
  </div>
  <div class="row mt-4">
    <div class="col-md-6">
      <h2>Add Feeding</h2>
      <form action="" method="POST">
        {% csrf_token %}
        <div class="form-group row">
          <label
            for="{{ feeding_form.date.id_for_label }}"
            class="col-sm-3 col-form-label"
            >Date</label
          >
          <div class="col-sm-9">
            <div class="input-group date" id="datepicker">
              {{ feeding_form.date }}
              <div class="input-group-append">
                <span class="input-group-text bg-white">
                  <i class="fa fa-calendar"></i>
                </span>
              </div>
            </div>
          </div>
        </div>
        <div class="form-group row">
          <label
            for="{{ feeding_form.meal.id_for_label }}"
            class="col-sm-3 col-form-label"
            >Meal</label
          >
          <div class="col-sm-9">{{ feeding_form.meal }}</div>
        </div>
        <button type="submit" class="btn btn-primary">Add</button>
      </form>
    </div>

    <div class="col-md-6">
      <h2>Feedings</h2>
      <table class="table">
        <thead>
          <tr>
            <th scope="col">Meal</th>
            <th scope="col">Date</th>
          </tr>
        </thead>
        <tbody>
          {% for feeding in finch.feeding_set.all %}
          <tr>
            <td>{{ feeding.get_meal_display }}</td>
            <td>{{ feeding.date }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="2">No feedings yet</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
<script type="text/javascript">
  $(function () {
    $("#datepicker").datepicker();
  });
</script>
{% endblock %}
